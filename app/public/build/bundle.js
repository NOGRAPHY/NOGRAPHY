var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function i(t){t.parentNode.removeChild(t)}function s(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function u(){return d(" ")}function h(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function f(t,e){t.value=null==e?"":e}function m(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}let b;function g(t){b=t}const y=[],x=[],w=[],v=[],$=Promise.resolve();let k=!1;function S(t){w.push(t)}let _=!1;const C=new Set;function N(){if(!_){_=!0;do{for(let t=0;t<y.length;t+=1){const e=y[t];g(e),O(e.$$)}for(g(null),y.length=0;x.length;)x.pop()();for(let t=0;t<w.length;t+=1){const e=w[t];C.has(e)||(C.add(e),e())}w.length=0}while(y.length);for(;v.length;)v.pop()();k=!1,_=!1,C.clear()}}function O(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(S)}}const T=new Set;function A(t,e){-1===t.$$.dirty[0]&&(y.push(t),k||(k=!0,$.then(N)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function E(a,c,l,s,d,u,h=[-1]){const p=b;g(a);const f=a.$$={fragment:null,ctx:null,props:u,update:t,not_equal:d,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(p?p.$$.context:c.context||[]),callbacks:n(),dirty:h,skip_bound:!1};let m=!1;if(f.ctx=l?l(a,c.props||{},((t,e,...n)=>{const o=n.length?n[0]:e;return f.ctx&&d(f.ctx[t],f.ctx[t]=o)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](o),m&&A(a,t)),e})):[],f.update(),m=!0,o(f.before_update),f.fragment=!!s&&s(f.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);f.fragment&&f.fragment.l(t),t.forEach(i)}else f.fragment&&f.fragment.c();c.intro&&((y=a.$$.fragment)&&y.i&&(T.delete(y),y.i(x))),function(t,n,a,c){const{fragment:l,on_mount:i,on_destroy:s,after_update:d}=t.$$;l&&l.m(n,a),c||S((()=>{const n=i.map(e).filter(r);s?s.push(...n):o(n),t.$$.on_mount=[]})),d.forEach(S)}(a,c.target,c.anchor,c.customElement),N()}var y,x;g(p)}function P(e){let n,o,r;return{c(){n=s("div"),n.innerHTML="<div></div> \n\t\t\t<div></div> \n\t\t\t<div></div> \n\t\t\t<div></div>",o=u(),r=s("div"),r.innerHTML="<p>This takes up to 12 seconds</p>",p(n,"class","lds-ellipsis"),p(r,"class","loading-hint")},m(t,e){l(t,n,e),l(t,o,e),l(t,r,e)},p:t,d(t){t&&i(n),t&&i(o),t&&i(r)}}}function H(t){let e,n,o,r,a,c=t[3]&&I(t);function d(t,e){return""!=t[4]?L:""!=t[5]?U:z}let f=d(t),m=f(t);return{c(){c&&c.c(),e=u(),m.c(),n=u(),o=s("input"),p(o,"type","file"),p(o,"id","fileId")},m(i,s){c&&c.m(i,s),l(i,e,s),m.m(i,s),l(i,n,s),l(i,o,s),r||(a=h(o,"change",t[7]),r=!0)},p(t,o){t[3]?c?c.p(t,o):(c=I(t),c.c(),c.m(e.parentNode,e)):c&&(c.d(1),c=null),f===(f=d(t))&&m?m.p(t,o):(m.d(1),m=f(t),m&&(m.c(),m.m(n.parentNode,n)))},d(t){c&&c.d(t),t&&i(e),m.d(t),t&&i(n),t&&i(o),r=!1,a()}}}function I(e){let n,o,r,a,d,f,m,b,g,y;return{c(){n=s("div"),o=s("p"),o.textContent="HINT: With NOGRAPHY you can hide a secret text within an\n\t\t\t\t\timage, by providing a non-secret placeholder text. You can\n\t\t\t\t\tdownload and share that image, deceiving outsiders with an\n\t\t\t\t\timage with the placeholder text. You (or any other insider)\n\t\t\t\t\tcan expose the secret using NOGRAPHY.",r=u(),a=s("br"),d=u(),f=s("button"),f.textContent="close hint",m=u(),b=s("br"),p(f,"class","btn-secondary btn-hint"),p(n,"class","hint-box")},m(t,i){l(t,n,i),c(n,o),c(n,r),c(n,a),c(n,d),c(n,f),l(t,m,i),l(t,b,i),g||(y=h(f,"click",e[11]),g=!0)},p:t,d(t){t&&i(n),t&&i(m),t&&i(b),g=!1,y()}}}function z(t){let e,n,r,a,d,b,g,y,x,w,v,$,k,S,_,C;return{c(){e=s("form"),n=s("label"),n.textContent="Secret :",r=u(),a=s("input"),d=u(),b=s("label"),b.textContent="Placeholder :",g=u(),y=s("textarea"),x=u(),w=s("br"),v=u(),$=s("button"),$.textContent="Hide Secret in Image",k=u(),S=s("button"),S.textContent="Expose Secret from Image",p(n,"for","secret"),p(a,"type","text"),p(a,"id","secret"),p(a,"maxlength","320"),p(b,"for","placeholder"),m(y,"height","20em"),m(y,"width","30em"),p(y,"name","placeholder"),p(y,"id","placeholder"),p(y,"maxlength","1600"),p($,"class","btn-primary"),p($,"type","button"),p(S,"class","btn-secondary"),p(S,"type","button")},m(o,i){l(o,e,i),c(e,n),c(e,r),c(e,a),f(a,t[0]),c(e,d),c(e,b),c(e,g),c(e,y),f(y,t[1]),c(e,x),c(e,w),c(e,v),c(e,$),c(e,k),c(e,S),_||(C=[h(a,"input",t[12]),h(y,"input",t[13]),h($,"click",t[6]),h(S,"click",t[8])],_=!0)},p(t,e){1&e&&a.value!==t[0]&&f(a,t[0]),2&e&&f(y,t[1])},d(t){t&&i(e),_=!1,o(C)}}}function U(t){let e,n,r,a,f,m,b,g,y,x,w,v,$;return{c(){e=s("p"),e.textContent="Exposed secret :",n=u(),r=s("h2"),a=d(t[5]),f=u(),m=s("br"),b=s("br"),g=u(),y=s("button"),y.textContent="Hide Secret in Image",x=u(),w=s("button"),w.textContent="Expose another Secret",p(y,"class","btn-primary"),p(y,"type","button"),p(w,"class","btn-secondary"),p(w,"type","button")},m(o,i){l(o,e,i),l(o,n,i),l(o,r,i),c(r,a),l(o,f,i),l(o,m,i),l(o,b,i),l(o,g,i),l(o,y,i),l(o,x,i),l(o,w,i),v||($=[h(y,"click",t[10]),h(w,"click",t[8])],v=!0)},p(t,e){32&e&&function(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}(a,t[5])},d(t){t&&i(e),t&&i(n),t&&i(r),t&&i(f),t&&i(m),t&&i(b),t&&i(g),t&&i(y),t&&i(x),t&&i(w),v=!1,o($)}}}function L(t){let e,n,r,a,c,d,f,b,g,y,x,w,v;return{c(){e=s("img"),r=u(),a=s("p"),a.textContent="⬆️  Download and Share this Image ⬆️",c=u(),d=s("br"),f=s("br"),b=u(),g=s("button"),g.textContent="Upload Image to expose Secret",y=u(),x=s("button"),x.textContent="Hide another Secret",m(e,"border","1px solid black"),e.src!==(n=t[4])&&p(e,"src",n),p(e,"alt","Secret"),m(a,"text-align","center"),m(a,"font-size","x-large"),p(g,"class","btn-primary"),p(g,"type","button"),p(x,"class","btn-secondary"),p(x,"type","button")},m(n,o){l(n,e,o),l(n,r,o),l(n,a,o),l(n,c,o),l(n,d,o),l(n,f,o),l(n,b,o),l(n,g,o),l(n,y,o),l(n,x,o),w||(v=[h(g,"click",t[8]),h(x,"click",t[9])],w=!0)},p(t,o){16&o&&e.src!==(n=t[4])&&p(e,"src",n)},d(t){t&&i(e),t&&i(r),t&&i(a),t&&i(c),t&&i(d),t&&i(f),t&&i(b),t&&i(g),t&&i(y),t&&i(x),w=!1,o(v)}}}function j(e){let n,o,r,a,d,h;function p(t,e){return t[2]?P:H}let f=p(e),m=f(e);return{c(){n=s("main"),o=s("h1"),o.textContent="nography",r=u(),a=s("br"),d=s("br"),h=u(),m.c()},m(t,e){l(t,n,e),c(n,o),c(n,r),c(n,a),c(n,d),c(n,h),m.m(n,null)},p(t,[e]){f===(f=p(t))&&m?m.p(t,e):(m.d(1),m=f(t),m&&(m.c(),m.m(n,null)))},i:t,o:t,d(t){t&&i(n),m.d()}}}function R(t,e,n){let o="Aragorn broke two of his toes while kicking an Uruk Hai helmet",r="In a hole in the ground there lived a hobbit. Not a nasty, dirty, wet hole, filled with the ends of worms and an oozy smell, nor yet a dry, bare, sandy hole with nothing in it to sit down on or to eat: it was a hobbit-hole, and that means comfort. It had a perfectly round door like a porthole, painted green, with a shiny yellow brass knob in the exact middle. The door opened on to a tube-shaped hall like a tunnel: a very comfortable tunnel without smoke, with panelled walls, and floors tiled and carpeted, provided with polished chairs, and lots and lots of pegs for hats and coats - the hobbit was fond of visitors.",a=!1,c=!0,l="",i="";const s=new Headers;s.append("Content-Type","application/json"),fetch("https://vk6c7sl3d6.execute-api.eu-central-1.amazonaws.com/prod/hide",{method:"POST",headers:s,body:'{"wake-up": true}',redirect:"follow"}).catch((t=>console.log("error",t))),fetch("https://vk6c7sl3d6.execute-api.eu-central-1.amazonaws.com/prod/expose",{method:"POST",headers:s,body:'{"wake-up": true}',redirect:"follow"}).catch((t=>console.log("error",t)));const d=(t,e)=>{let n=!0;return 0==t.length&&(n=!1,alert("Provide a secret.")),0==e.length&&(n=!1,alert("Provide a placeholder.")),t.match("^[a-zA-Z ]*$")||(n=!1,alert("Use only A-Z for your secret.")),e.match("^[a-zA-Z-()`',.?!;: ]*$")||(n=!1,alert("Use only letters and punctuation marks for your placeholder.")),5*t.length>e.length&&(n=!1,alert("Use a longer placeholder or a shorter secret.")),n},u=t=>{n(4,l="");var e=JSON.stringify({image:t});fetch("https://vk6c7sl3d6.execute-api.eu-central-1.amazonaws.com/prod/expose",{method:"POST",headers:s,body:e,redirect:"follow"}).then((t=>t.text())).then((t=>{let e=JSON.parse(t);n(5,i=e.exposed_message),n(2,a=!1)})).catch((t=>console.log("error",t)))};return[o,r,a,c,l,i,()=>{if(d(o,r)){n(2,a=!0);var t=JSON.stringify({secret:o,placeholder:r});fetch("https://vk6c7sl3d6.execute-api.eu-central-1.amazonaws.com/prod/hide",{method:"POST",headers:s,body:t,redirect:"follow"}).then((t=>t.text())).then((t=>{n(4,l="data:image/png;base64,"+t),n(2,a=!1)})).catch((t=>console.log("error",t)))}},()=>{n(2,a=!0);let t=document.querySelector("input[type=file]").files[0],e=new FileReader;e.onload=function(){let t=e.result.replace("data:","").replace(/^.+,/,"");u(t)},e.readAsDataURL(t)},()=>{document.querySelector("input[type=file]").click()},()=>{n(4,l="")},()=>{n(5,i="")},()=>{n(3,c=!1)},function(){o=this.value,n(0,o)},function(){r=this.value,n(1,r)}]}return new class extends class{$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){super(),E(this,t,R,j,a,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
